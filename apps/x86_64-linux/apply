#!/usr/bin/env bash
set -euo pipefail

GREEN=$'\e[1;32m'
YELLOW=$'\e[1;33m'
RED=$'\e[1;31m'
NC=$'\e[0m'

SYSTEM_TYPE="x86_64-linux"

echo "${YELLOW}Applying Linux configuration...${NC}"
echo "This will install packages and configure your environment."
read -p "Continue? (y/N): " -n 1 -r
echo
if [[ $REPLY =~ ^[Yy]$ ]]; then
    nix build .#homeConfigurations.wsl2.${SYSTEM_TYPE}.activationPackage
    ./result/activate
    echo "${GREEN}Configuration applied successfully!${NC}"
else
    echo "${RED}Operation cancelled.${NC}"
    exit 1
fi 
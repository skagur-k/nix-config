#!/bin/sh -e

GREEN='\033[1;32m'
YELLOW='\033[1;33m'
RED='\033[1;31m'
NC='\033[0m'

SYSTEM_TYPE="x86_64-darwin"

export NIXPKGS_ALLOW_UNFREE=1

echo "${YELLOW}Applying work MacBook configuration (no sudo required)...${NC}"

# Build and switch in one command for convenience
nix --extra-experimental-features 'nix-command flakes' run nix-darwin -- switch --flake .#darwin-otsk.${SYSTEM_TYPE} $@

echo "${GREEN}Work MacBook configuration applied successfully!${NC}"
echo ""
echo "${YELLOW}Note: This configuration only manages user-space settings.${NC}"
echo "${YELLOW}System-level preferences need to be configured manually.${NC}"